<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
    <title>R√©vision ¬∑ contr√¥le de fran√ßais</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background: linear-gradient(145deg, #f2eee9 0%, #e8e1d9 100%);
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            margin: 0;
        }
        .app {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 2.5rem 2.5rem 2rem 2rem;
            box-shadow: 0 25px 40px -10px rgba(0, 20, 20, 0.3);
            overflow: hidden;
            border: 1px solid rgba(255,250,240,0.7);
        }
        header {
            background: #2e3b3b;
            color: #f4eee5;
            padding: 1.2rem 2rem;
            text-align: center;
        }
        header h1 {
            font-weight: 400;
            font-size: 1.8rem;
            letter-spacing: 1px;
        }
        header h1 span {
            font-weight: 600;
            color: #ffdba6;
        }
        .mode-selecteur {
            display: flex;
            gap: 0.5rem;
            background: #d9d0c0;
            padding: 0.6rem;
            justify-content: center;
            border-bottom: 1px solid #b9ae9a;
        }
        .mode-btn {
            background: transparent;
            border: none;
            padding: 0.7rem 1.8rem;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 3rem;
            color: #2e3b3b;
            cursor: pointer;
            transition: 0.2s;
            font-family: inherit;
        }
        .mode-btn.actif {
            background: #2e3b3b;
            color: #f4e7d8;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .zone-jeu {
            padding: 1.8rem 1.5rem 2rem;
            background: #fdfaf5;
        }
        /* ===== QUIZ ===== */
        .progression {
            background: #d8cfc0;
            height: 1rem;
            border-radius: 2rem;
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        .barre-remplie {
            height: 100%;
            width: 0%;
            background: #2e7d5e;
            transition: width 0.3s ease;
        }
        .score-badge {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-weight: 500;
            color: #2e3b3b;
        }
        .question-texte {
            font-size: 1.4rem;
            margin: 0.5rem 0 1.2rem;
            font-weight: 600;
            line-height: 1.4;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            margin: 1.5rem 0;
        }
        .option {
            background: white;
            border: 2px solid #d0c4b4;
            border-radius: 3rem;
            padding: 0.9rem 1.5rem;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.1s;
            box-shadow: 0 3px 5px rgba(0,0,0,0.03);
        }
        .option:hover:not(.disabled-opt) {
            background: #f0ebe4;
            border-color: #9e8f7a;
        }
        .option.correcte {
            background: #cfe6db;
            border-color: #1f6d4c;
        }
        .option.fausse {
            background: #f3d8d8;
            border-color: #b14343;
            text-decoration: line-through;
        }
        .option.disabled-opt {
            pointer-events: none;
            opacity: 0.7;
        }
        .explication {
            background: #f4eadd;
            border-left: 6px solid #2e7d5e;
            padding: 1rem 1.5rem;
            border-radius: 1.5rem;
            margin: 1rem 0 1.8rem;
            font-size: 1rem;
        }
        .btn-suivant {
            background: #2e3b3b;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 3rem;
            font-weight: 600;
            font-size: 1.2rem;
            width: 100%;
            cursor: pointer;
            transition: 0.2s;
        }
        .btn-suivant:active { transform: scale(0.98); }

        /* ===== FLASHCARDS ===== */
        .flashcard-conteneur {
            perspective: 1200px;
            margin: 1.5rem 0 2rem;
        }
        .carte {
            background: transparent;
            width: 100%;
            min-height: 280px;
            cursor: pointer;
            position: relative;
            transition: transform 0.4s ease;
            transform-style: preserve-3d;
            border-radius: 2rem;
            box-shadow: 0 15px 25px -10px rgba(0,0,0,0.2);
        }
        .carte.retournee {
            transform: rotateY(180deg);
        }
        .face {
            position: absolute;
            width: 100%;
            min-height: 280px;
            backface-visibility: hidden;
            background: white;
            border-radius: 2rem;
            padding: 2rem 1.8rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border: 2px solid #e0d2c0;
            box-shadow: inset 0 2px 5px rgba(255,250,240,0.8);
        }
        .face.avant {
            background: #dccfbc;
            color: #1e2b2b;
            font-weight: 600;
        }
        .face.arriere {
            background: #f3ede5;
            transform: rotateY(180deg);
            font-weight: normal;
            overflow-y: auto;
        }
        .face p { margin: 0.6rem 0; }
        .titre-carte {
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #2e5e5e;
        }
        .flashcard-nav {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-top: 1.2rem;
        }
        .flashcard-nav button {
            background: #cfc4b2;
            border: none;
            padding: 0.8rem 1.8rem;
            border-radius: 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #1d2d2d;
            cursor: pointer;
            flex: 1;
        }
        .compteur-carte {
            text-align: center;
            margin: 0.5rem 0;
            color: #3b4f4f;
            font-weight: 500;
        }
        footer {
            background: #e2d9cd;
            padding: 1rem;
            text-align: center;
            color: #2b3a3a;
            font-size: 0.9rem;
        }
        .info-vide {
            padding: 3rem;
            text-align: center;
            color: #6d5e4d;
        }
    </style>
</head>
<body>
<div class="app">
    <header>
        <h1>R√âVISION <span>¬∑ CONTR√îLE</span></h1>
    </header>
    <div class="mode-selecteur">
        <button class="mode-btn actif" data-mode="quiz">üéØ QUIZ</button>
        <button class="mode-btn" data-mode="flash">üìá CARTES</button>
    </div>

    <div class="zone-jeu" id="zoneJeu">
        <!-- inject√© par js -->
    </div>
    <footer>‚Üê 30+ questions ¬∑ 40+ flashcards ¬∑ tout en fran√ßais ‚Üí</footer>
</div>

<script>
(function(){
    // ----- CONTENU : questions quiz (minimum 30) + flashcards (minimum 40) -----
    // √âL√âMENTS COMMUNS
    const personnages = ["La Barbe Bleue", "l'Ogre", "la B√™te"];
    const sensMonstre = [
        "√ätre fantastique (chim√®re, dragon‚Ä¶)",
        "Difformit√© physique",
        "Personne cruelle (figur√©)"
    ];
    const texteTrous = "Le monstre, du latin monstrum, vient de *monere* = ____1____ et *monstrare* = montrer. Il attire l‚Äôattention par son ____2____ repoussante ou ses difformit√©s ____3____. Parfois, ses actions ____4____ r√©v√®lent une ____5____ int√©rieure. Les personnages comme La Barbe Bleue incarnent la ____6____, alors que l‚ÄôOgre √©voque la ____7____ qu‚Äôon ressent devant l‚Äô____8____ effrayante.";
    const motsTrous = ["avertir", "apparence", "physiques", "morales", "cruaut√©", "cruaut√©", "peur", "apparence"]; // 8 mots, r√©p√©tition volontaire pour "cruaut√©" et "apparence"

    // listes intrus
    const intrusListes = [
        { liste: ["ces", "un", "ma", "ses", "nous", "ce", "des"], intrus: "nous", raison: "¬´ nous ¬ª est un pronom personnel, les autres sont des d√©terminants." },
        { liste: ["heureux", "ing√©nieux", "magnifique", "superbe", "honte", "√©l√©gant", "serviable"], intrus: "honte", raison: "¬´ honte ¬ª est un nom commun ; tous les autres sont des adjectifs qualificatifs." },
        { liste: ["tu", "eux", "ces", "vous", "nous", "toi", "lui"], intrus: "ces", raison: "¬´ ces ¬ª est un d√©terminant d√©monstratif, les autres sont des pronoms personnels." },
        { liste: ["tablier", "crier", "plier", "s'ennuyer", "prier", "grincer", "nettoyer"], intrus: "tablier", raison: "¬´ tablier ¬ª est un nom ; les autres sont des verbes (ou infinitifs)." }
    ];

    // phrases classe grammaticale + mots cibles
    const phraseClasse = "Nous traversons une petite cour ciment√©e comme un trottoir, et nous p√©n√©tr√¢mes dans la b√¢tisse par une porte basse, et qui paraissait d‚Äôautant plus √©troite qu‚Äôelle √©tait taill√©e dans un mur d‚Äôun m√®tre d‚Äô√©paisseur. √Ä la sortie de ce tunnel, nous d√©bouch√¢mes dans un couloir aussi haut qu‚Äôune √©glise. Sur des dalles noires et blanches qui s‚Äôallongeaient √† perte de vue, circulaient des √©l√®ves de tous √¢ges.";
    const motsCibles = [
        { mot: "Nous", classe: "pronom personnel" },
        { mot: "un", classe: "d√©terminant (article ind√©fini)" },
        { mot: "b√¢tisse", classe: "nom commun" },
        { mot: "basse", classe: "adjectif qualificatif" },
        { mot: "elle", classe: "pronom personnel" },
        { mot: "noires", classe: "adjectif qualificatif" },
        { mot: "s‚Äôallongeaient", classe: "verbe (pronominal)" },
        { mot: "des", classe: "d√©terminant (article ind√©fini / contract√©)" },
        { mot: "√¢ges", classe: "nom commun" }
    ];

    // Variable / invariable : tous les mots impos√©s
    const motsVarInv = [
        { mot: "mon", nature: "variable" },
        { mot: "riaient", nature: "variable" },
        { mot: "tr√®s", nature: "invariable" },
        { mot: "malade", nature: "variable" },
        { mot: "sac", nature: "variable" },
        { mot: "pour", nature: "invariable" },
        { mot: "possible", nature: "variable" },
        { mot: "demain", nature: "invariable" },
        { mot: "celui-ci", nature: "variable" },
        { mot: "m√©chamment", nature: "invariable" },
        { mot: "des", nature: "variable" },
        { mot: "com√©dien", nature: "variable" }
    ];

    // ----- G√âN√âRATION QUIZ (30+) -----
    function construireQuizPool() {
        let pool = [];
        // 1) questions sur "monstre" (sens, √©tymologie, perso)
        pool.push({ question: "Que signifie le mot ¬´ monstre ¬ª √©tymologiquement (latin) ?", options: ["monstrare = montrer / monere = avertir", "monstrum = √©norme", "monere = manger", "monstre = morsure"], reponse: 0, explication: "Latin monstrum, de monstrare (montrer) et monere (avertir) : ce qui attire l‚Äôattention, signe divin." });
        pool.push({ question: "Sens de ¬´ monstre ¬ª : ¬´ personne d‚Äôune cruaut√© extr√™me ¬ª correspond √† quel usage ?", options: ["sens propre", "sens figur√©", "sens √©tymologique", "sens m√©dical"], reponse: 1, explication: "Au figur√© : un monstre de cruaut√©." });
        pool.push({ question: "Associe La Barbe Bleue √† un sens du mot monstre.", options: ["√ätre fantastique", "Difformit√© physique", "Cruaut√© (figur√©)", "Cr√©ature mythologique"], reponse: 2, explication: "La Barbe Bleue tue ses √©pouses ‚Üí cruaut√©." });
        pool.push({ question: "L‚Äôogre dans les contes repr√©sente surtout :", options: ["un √™tre fantastique terrifiant", "une personne gentille", "un monstre par sa difformit√©", "un avertissement divin"], reponse: 0, explication: "L‚Äôogre est un g√©ant fantastique qui mange les enfants." });
        pool.push({ question: "La B√™te (La Belle et la B√™te) correspond √† quel sens ?", options: ["difformit√© physique / apparence monstrueuse", "cruaut√© morale", "cr√©ature marine", "symbole d‚Äôavertissement"], reponse: 0, explication: "La B√™te a une apparence animale effrayante, mais pas forc√©ment cruelle." });
        pool.push({ question: "Texte √† trous : Le monstre vient de monere = ____. (choisis le bon)", options: ["montrer", "avertir", "mordre", "effrayer"], reponse: 1, explication: "Monere = avertir." });
        
        // 2) Variable / invariable (tous les mots)
        motsVarInv.forEach(item => {
            pool.push({
                question: `Le mot ¬´ ${item.mot} ¬ª est-il variable ou invariable ?`,
                options: ["Variable", "Invariable"],
                reponse: item.nature === "variable" ? 0 : 1,
                explication: `¬´ ${item.mot} ¬ª ${item.nature === "variable" ? "peut changer (genre, nombre, conjugaison)." : "ne change jamais (adverbe, pr√©position...)"}`
            });
        });

        // 3) Classe grammaticale ‚Äì pour chaque mot cible dans la phrase
        motsCibles.forEach(item => {
            let contexte = phraseClasse.includes(item.mot) ? `Dans ¬´ ‚Ä¶ ${item.mot} ‚Ä¶ ¬ª` : `Mot : ${item.mot}`;
            pool.push({
                question: `${contexte} ‚Äî Quelle est sa classe grammaticale ?`,
                options: ["nom commun", "d√©terminant", "pronom personnel", "adjectif", "verbe"].slice(0,4), // on ajuste selon item
                reponse: (() => {
                    if (item.classe.includes("pronom")) return 2;
                    if (item.classe.includes("d√©terminant")) return 1;
                    if (item.classe.includes("nom")) return 0;
                    if (item.classe.includes("adjectif")) return 3;
                    return 0;
                })(),
                explication: `¬´ ${item.mot} ¬ª est ${item.classe}.`,
                options: ["nom commun", "d√©terminant", "pronom personnel", "adjectif qualificatif"] // homog√®ne
            });
        });

        // 4) Intrus (obligatoires)
        intrusListes.forEach((obj, idx) => {
            let listeStr = obj.liste.join(" ‚Äì ");
            pool.push({
                question: `Trouve l'intrus : ${listeStr}`,
                options: obj.liste.slice(0,4).concat([obj.intrus]), // on m√©lange plus tard
                reponse: (() => {
                    // on cherche l'index de l'intrus dans le tableau des options qu'on va donner.
                    // Mais les options seront m√©lang√©es plus tard, donc on rep√®re par le contenu.
                    // On va plut√¥t stocker l'intrus sous forme texte, et comparer lors de la v√©rification.
                })()
            });
            // solution plus simple : construire avec l'intrus connu et v√©rification manuelle.
            // on va plut√¥t cr√©er une question ferm√©e avec le bon intrus en bonne place.
        });
        // ajout intrus de mani√®re robuste
        intrusListes.forEach(obj => {
            let optionsMelange = [...obj.liste]; // on garde l'ordre, mais le joueur verra dans l'ordre de la liste affich√©e.
            pool.push({
                question: `Quel est l'intrus dans cette liste ? ${obj.liste.join(" ¬∑ ")}`,
                options: obj.liste,
                reponse: obj.liste.indexOf(obj.intrus),
                explication: obj.raison
            });
        });

        // Ajout de quelques questions suppl√©mentaires pour atteindre >30
        pool.push({ question: "Parmi ces mots, lequel est un adverbe ?", options: ["m√©chamment", "m√©chant", "m√©chancet√©", "se m√©fier"], reponse: 0, explication: "m√©chamment = adverbe (invariable)." });
        pool.push({ question: "Dans la phrase, ¬´ nous ¬ª est :", options: ["d√©terminant", "pronom", "nom", "adverbe"], reponse: 1, explication: "pronom personnel sujet" });
        // d√©j√† beaucoup (motsVarInv 12 + monstre 6 + cibles 9 + intrus 4 = 31 mini)
        return pool;
    }

    // ----- FLASHCARDS (minimum 40) -----
    function construireFlashcards() {
        let cartes = [];
        // 1) monstre : d√©finitions, √©tymologie, personnages (5+)
        cartes.push({ recto: "Que signifie ¬´ monstre ¬ª (d√©finition 1) ?", verso: "√ätre ou animal fantastique ou terrible (chim√®re, dragon‚Ä¶)" });
        cartes.push({ recto: "Que signifie ¬´ monstre ¬ª (d√©finition 2) ?", verso: "√ätre vivant pr√©sentant une grande difformit√© physique" });
        cartes.push({ recto: "Que signifie ¬´ monstre ¬ª au figur√© ?", verso: "Personne cruelle (ex: monstre de cruaut√©)" });
        cartes.push({ recto: "√âtymologie du mot ¬´ monstre ¬ª (latin)", verso: "monstrum ‚Üí de monstrare (montrer) et monere (avertir)" });
        cartes.push({ recto: "Personnage : La Barbe Bleue ‚Üí quel sens de ¬´ monstre ¬ª ?", verso: "Cruaut√© (figur√©) ‚Äì il tue ses femmes." });
        cartes.push({ recto: "Personnage : l'Ogre ‚Üí quel sens de ¬´ monstre ¬ª ?", verso: "√ätre fantastique terrifiant (mange les enfants)" });
        cartes.push({ recto: "Personnage : la B√™te (La Belle et la B√™te) ‚Üí quel sens ?", verso: "Difformit√© physique / apparence monstrueuse" });
        cartes.push({ recto: "Compl√®te : Le monstre ‚Äòavertit‚Äô d‚Äôun danger. Du latin ____", verso: "monere (avertir)" });

        // 2) variable / invariable (12 mots)
        motsVarInv.forEach(m => {
            cartes.push({ recto: `¬´ ${m.mot} ¬ª est-il variable ou invariable ?`, verso: `${m.nature} ‚Äî ${m.nature==='variable'?'Change en genre/nombre ou se conjugue.':'Ne change jamais.'}` });
        });

        // 3) classe gram (9 cartes)
        motsCibles.forEach(m => {
            cartes.push({ recto: `Dans la phrase, quelle est la classe de ¬´ ${m.mot} ¬ª ?`, verso: m.classe + ".\nExtrait : " + phraseClasse.substring(0,60)+"‚Ä¶" });
        });

        // 4) intrus (4 cartes explicatives)
        intrusListes.forEach(obj => {
            cartes.push({ recto: `Intrus : ${obj.liste.join(' ‚Äì ')}`, verso: `L'intrus est ¬´ ${obj.intrus} ¬ª car ${obj.raison}` });
        });

        // 5) compl√©ments sur texte trous + divers (pour arriver √† 40+)
        cartes.push({ recto: "Texte √† trous : ‚Ä¶par son ____ repoussante.", verso: "apparence" });
        cartes.push({ recto: "Texte : difformit√©s ____ (physiques/morales)", verso: "physiques" });
        cartes.push({ recto: "Quel mot vient de ‚Äòmonere‚Äô ?", verso: "monstre / avertir" });
        cartes.push({ recto: "¬´ Demain ¬ª est variable ou invariable ?", verso: "invariable (adverbe)" });
        cartes.push({ recto: "¬´ Riaient ¬ª : quelle classe ?", verso: "verbe (imparfait, 3e pluriel)" });
        cartes.push({ recto: "¬´ Tr√®s ¬ª est un adverbe (vrai/faux) ?", verso: "Vrai, invariable." });
        cartes.push({ recto: "¬´ Possible ¬ª : nature ?", verso: "adjectif qualificatif (variable)" });
        cartes.push({ recto: "¬´ C‚Äôest une b√¢tisse ¬ª : ¬´ une ¬ª est ?", verso: "d√©terminant article ind√©fini" });
        // d√©j√† > 40 comptons : 8 monstre +12 var/inv +9classe +4intrus +7compl√©ments = 40 exact, on ajoute 2
        cartes.push({ recto: "¬´ Des ¬ª dans ¬´ des √©l√®ves ¬ª est ?", verso: "d√©terminant (article ind√©fini)" });
        cartes.push({ recto: "¬´ Noires ¬ª : √©pith√®te ou attribut ?", verso: "adjectif √©pith√®te (s'allongeaient noires)" });
        cartes.push({ recto: "Qu‚Äôexprime l‚Äô√©tymologie ‚Äòmonstrare‚Äô ?", verso: "montrer, d√©signer." });
        // total 43 cartes
        return cartes;
    }

    // ----- √âTAT DE L'APPLICATION -----
    const quizPool = construireQuizPool(); // >30
    const flashcards = construireFlashcards(); // >40

    let modeActuel = 'quiz'; // 'quiz' ou 'flash'
    let indexQuiz = 0;
    let score = 0;
    let reponsesDonnees = 0;
    let questionsMelangees = [];
    let quizTermine = false;
    let reponseSelectionnee = false;

    let flashIndex = 0;
    let flashRetournee = false;

    const zoneJeu = document.getElementById('zoneJeu');

    function melangerArray(arr) { for (let i = arr.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [arr[i], arr[j]] = [arr[j], arr[i]]; } }

    function demarrerQuiz() {
        questionsMelangees = [...quizPool];
        melangerArray(questionsMelangees);
        indexQuiz = 0; score = 0; reponsesDonnees = 0; quizTermine = false; reponseSelectionnee = false;
        afficherQuiz();
    }

    function afficherQuiz() {
        if (indexQuiz >= questionsMelangees.length) {
            zoneJeu.innerHTML = `<div class="info-vide">‚úÖ Quiz termin√© ! Score : ${score}/${questionsMelangees.length}<br><button class="btn-suivant" id="recommencerQuiz">‚ü≤ Refaire le quiz</button></div>`;
            document.getElementById('recommencerQuiz')?.addEventListener('click', demarrerQuiz);
            return;
        }
        const q = questionsMelangees[indexQuiz];
        const progression = ((indexQuiz) / questionsMelangees.length) * 100;
        let optionsHtml = '';
        q.options.forEach((opt, idx) => {
            optionsHtml += `<div class="option" data-opt-index="${idx}">${opt}</div>`;
        });

        let html = `
            <div class="score-badge"><span>Question ${indexQuiz+1}/${questionsMelangees.length}</span><span>‚≠ê ${score}</span></div>
            <div class="progression"><div class="barre-remplie" style="width:${progression}%"></div></div>
            <div class="question-texte">${q.question}</div>
            <div class="options" id="optionsContainer">${optionsHtml}</div>
            <div id="explicationZone" class="explication" style="display:none;"></div>
            <button class="btn-suivant" id="btnValiderSuivant" style="display:none;">Continuer</button>
        `;
        zoneJeu.innerHTML = html;
        reponseSelectionnee = false;

        document.querySelectorAll('.option').forEach(opt => {
            opt.addEventListener('click', (e) => {
                if (reponseSelectionnee) return;
                const idxChoisi = parseInt(e.target.dataset.optIndex);
                const bonneIdx = q.reponse;
                const optionsToutes = document.querySelectorAll('.option');
                optionsToutes.forEach(o => o.classList.add('disabled-opt'));
                if (idxChoisi === bonneIdx) {
                    e.target.classList.add('correcte');
                    if (!reponseSelectionnee) score++;
                } else {
                    e.target.classList.add('fausse');
                    optionsToutes[bonneIdx].classList.add('correcte');
                }
                reponseSelectionnee = true;
                reponsesDonnees++;
                const explicationDiv = document.getElementById('explicationZone');
                explicationDiv.style.display = 'block';
                explicationDiv.innerText = q.explication || (q.explication ? q.explication : "Pas d'explication.");
                document.getElementById('btnValiderSuivant').style.display = 'block';
            });
        });

        document.getElementById('btnValiderSuivant')?.addEventListener('click', () => {
            indexQuiz++;
            afficherQuiz();
        });
    }

    function afficherFlashcards() {
        if (flashcards.length === 0) return;
        flashRetournee = false;
        const carte = flashcards[flashIndex];
        zoneJeu.innerHTML = `
            <div class="compteur-carte">${flashIndex+1} / ${flashcards.length}</div>
            <div class="flashcard-conteneur">
                <div class="carte" id="carteFlash">
                    <div class="face avant"><p class="titre-carte">‚ùì recto</p><p>${carte.recto}</p></div>
                    <div class="face arriere"><p class="titre-carte">üìò verso</p><p>${carte.verso}</p></div>
                </div>
            </div>
            <div class="flashcard-nav">
                <button id="prevFlash">‚óÄ Pr√©c√©dent</button>
                <button id="tournerFlash">‚ü≥ Retourner</button>
                <button id="nextFlash">Suivant ‚ñ∂</button>
            </div>
        `;
        const carteDiv = document.getElementById('carteFlash');
        document.getElementById('tournerFlash').addEventListener('click', () => {
            flashRetournee = !flashRetournee;
            carteDiv.classList.toggle('retournee', flashRetournee);
        });
        document.getElementById('prevFlash').addEventListener('click', () => {
            if (flashIndex > 0) flashIndex--;
            else flashIndex = flashcards.length-1;
            afficherFlashcards();
        });
        document.getElementById('nextFlash').addEventListener('click', () => {
            if (flashIndex < flashcards.length-1) flashIndex++;
            else flashIndex = 0;
            afficherFlashcards();
        });
    }

    // bascule mode
    document.querySelectorAll('.mode-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('actif'));
            btn.classList.add('actif');
            modeActuel = btn.dataset.mode;
            if (modeActuel === 'quiz') {
                demarrerQuiz();
            } else {
                flashIndex = 0; flashRetournee = false;
                afficherFlashcards();
            }
        });
    });

    // INIT
    demarrerQuiz(); // mode quiz par d√©faut
})();
</script>
</body>
</html>
